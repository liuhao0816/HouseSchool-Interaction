<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gxa.modules.sys.mapper.StudentAttendanceMapper">
    <select id="querySchoolIdByUserId" resultType="java.lang.Integer">
        SELECT cg.school_id
        FROM teacher t,class_grade cg
        WHERE t.teacher_jobno=cg.class_teacher AND t.user_id=#{userId}
    </select>

    <resultMap id="queryClassBySchoolIdResult" type="studentClass">
        <id property="classId" column="class_id"/>
        <result property="classGradeName" column="class_grade_name"/>
    </resultMap>
    <select id="queryClassBySchoolId" resultMap="queryClassBySchoolIdResult">
        SELECT class_id,class_grade_name
        FROM class_grade
        WHERE school_id=#{schoolId}
    </select>

    <select id="queryAllStudentBy" resultType="com.gxa.modules.sys.entity.StudentAttendance">
        SELECT cg.class_grade_name,s.student_name,s.gender,s.student_id,u.phone
        FROM teacher t,teacher_class tc,student s,class_grade cg,student_parent sp,user u
        WHERE t.teacher_jobno=tc.teacher_jobno AND tc.class_id=s.class_id AND tc.class_id=cg.class_id AND s.student_id=sp.student_id AND sp.user_id=u.user_id AND t.user_id=#{map.userId}
    </select>


</mapper>